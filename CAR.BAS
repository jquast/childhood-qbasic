DECLARE SUB MOVE ()
DECLARE SUB ENEMY ()
DECLARE SUB MAKE ()
SCREEN 13
DIM SHARED CAR.X, CAR.Y, CAR.X.SLOPE, CAR.Y.SLOPE, action$, dir$, ENEMY.X, ENEMY.Y, ENEMY.X.SLOPE, ENEMY.Y.SLOPE
CAR.X = 160
CAR.Y = 100
ENEMY.X = 100
ENEMY.Y = 20

DO

DO
    K$ = INKEY$
    action$ = "draw": MAKE
        FOR SLOW = 1 TO 1000: NEXT SLOW
    action$ = "erase": MAKE
        IF CAR.X <= 10 OR CAR.X >= 310 THEN CAR.X.SLOPE = CAR.X.SLOPE * -1
        IF CAR.Y <= 10 OR CAR.Y >= 190 THEN CAR.Y.SLOPE = CAR.Y.SLOPE * -1
        IF ENEMY.X <= 10 OR ENEMY.X >= 310 THEN ENEMY.X.SLOPE = ENEMY.X.SLOPE * -1
        IF ENEMY.Y <= 10 OR ENEMY.Y >= 190 THEN ENEMY.Y.SLOPE = ENEMY.Y.SLOPE * -1

    CAR.X = CAR.X + CAR.X.SLOPE
    CAR.Y = CAR.Y + CAR.Y.SLOPE
    ENEMY.X = ENEMY.X + ENEMY.X.SLOPE
    ENEMY.Y = ENEMY.Y + ENEMY.Y.SLOPE
        IF CAR.X.SLOPE >= 0 THEN CAR.X.SLOPE = CAR.X.SLOPE - .02
        IF CAR.X.SLOPE <= 0 THEN CAR.X.SLOPE = CAR.X.SLOPE + .02
        IF CAR.Y.SLOPE >= 0 THEN CAR.Y.SLOPE = CAR.Y.SLOPE - .02
        IF CAR.Y.SLOPE <= 0 THEN CAR.Y.SLOPE = CAR.Y.SLOPE + .02
        IF ENEMY.X.SLOPE >= 0 THEN ENEMY.X.SLOPE = ENEMY.X.SLOPE - .02
        IF ENEMY.X.SLOPE <= 0 THEN ENEMY.X.SLOPE = ENEMY.X.SLOPE + .02
        IF ENEMY.Y.SLOPE >= 0 THEN ENEMY.Y.SLOPE = ENEMY.Y.SLOPE - .02
        IF ENEMY.Y.SLOPE <= 0 THEN ENEMY.Y.SLOPE = ENEMY.Y.SLOPE + .02
    ENEMY
    LOOP WHILE K$ = ""
    Ky = ASC(RIGHT$(K$, 1))
        IF K$ = "W" THEN dir$ = "up"
        IF K$ = "A" THEN dir$ = "left"
        IF K$ = "D" THEN dir$ = "right"
        IF K$ = "S" THEN dir$ = "down"
        IF K$ = "E" THEN dir$ = "brake"
        IF K$ = "Q" THEN CLS : END
    MOVE
LOOP

SUB ENEMY
IF ENEMY.X < CAR.X THEN ENEMY.X.SLOPE = ENEMY.X.SLOPE + .1
IF ENEMY.X > CAR.X THEN ENEMY.X.SLOPE = ENEMY.X.SLOPE - .1
IF ENEMY.Y < CAR.Y THEN ENEMY.Y.SLOPE = ENEMY.Y.SLOPE + .1
IF ENEMY.Y > CAR.Y THEN ENEMY.Y.SLOPE = ENEMY.Y.SLOPE - .1
END SUB

SUB MAKE
IF action$ = "erase" THEN
    PAINT (CAR.X, CAR.Y), 0
    PAINT (ENEMY.X, ENEMY.Y), 0
END IF
IF action$ = "draw" THEN
    LINE (CAR.X - 3, CAR.Y - 3)-(CAR.X - 3, CAR.Y + 3), 3
    LINE (CAR.X - 3, CAR.Y + 3)-(CAR.X + 3, CAR.Y + 3), 3
    LINE (CAR.X + 3, CAR.Y + 3)-(CAR.X + 3, CAR.Y - 3), 3
    LINE (CAR.X - 3, CAR.Y - 3)-(CAR.X + 3, CAR.Y - 3), 3
    PAINT (CAR.X, CAR.Y), 3
    LINE (ENEMY.X - 3, ENEMY.Y - 3)-(ENEMY.X - 3, ENEMY.Y + 3), 4
    LINE (ENEMY.X - 3, ENEMY.Y + 3)-(ENEMY.X + 3, ENEMY.Y + 3), 4
    LINE (ENEMY.X + 3, ENEMY.Y + 3)-(ENEMY.X + 3, ENEMY.Y - 3), 4
    LINE (ENEMY.X - 3, ENEMY.Y - 3)-(ENEMY.X + 3, ENEMY.Y - 3), 4
    PAINT (ENEMY.X, ENEMY.Y), 4

END IF

END SUB

SUB MOVE
IF dir$ = "up" THEN
    CAR.Y.SLOPE = CAR.Y.SLOPE + (-.3)
END IF
IF dir$ = "down" THEN
    CAR.Y.SLOPE = CAR.Y.SLOPE + (.3)
END IF
IF dir$ = "left" THEN
    CAR.X.SLOPE = CAR.X.SLOPE + (-.3)
END IF
IF dir$ = "right" THEN
    CAR.X.SLOPE = CAR.X.SLOPE + (.3)
END IF
IF dir$ = "brake" THEN
IF CAR.X.SLOPE >= .6 THEN CAR.X.SLOPE = CAR.X.SLOPE - .6
IF CAR.X.SLOPE <= -.6 THEN CAR.X.SLOPE = CAR.X.SLOPE + .6
IF CAR.Y.SLOPE >= .6 THEN CAR.Y.SLOPE = CAR.Y.SLOPE - .6
IF CAR.Y.SLOPE <= -.6 THEN CAR.Y.SLOPE = CAR.Y.SLOPE + .6
END IF

IF CAR.X.SLOPE >= 7 THEN CAR.X.SLOPE = 3
IF CAR.X.SLOPE <= -7 THEN CAR.X.SLOPE = -3
IF CAR.Y.SLOPE >= 7 THEN CAR.Y.SLOPE = 3
IF CAR.Y.SLOPE <= -7 THEN CAR.Y.SLOPE = -3

dir$ = ""
END SUB

